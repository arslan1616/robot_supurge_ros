<launch>
  <!-- Hangi robot modelini kullanacağımızı burada tanımlıyoruz -->
  <arg name="model" default="waffle_pi"/>

  <!-- Simülasyon zamanını kullanmayı zorunlu kıl -->
  <param name="use_sim_time" value="true"/>

  <!-- Robotun model tanımını (URDF) parametre sunucusuna yükle -->
  <param name="robot_description" command="$(find xacro)/xacro $(find turtlebot3_description)/urdf/turtlebot3_$(arg model).urdf.xacro" />

  <!-- Gazebo simülasyonunu ve içinde robotu başlat -->
  <include file="$(find turtlebot3_gazebo)/launch/turtlebot3_house.launch">
    <arg name="model" value="$(arg model)"/>
  </include>

  <!-- Robotun eklem durumlarına göre TF transformasyonlarını yayınla -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen"/>

  <!-- SLAM (gmapping) algoritmasını çalıştır -->
  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
    <param name="base_frame" value="base_footprint"/>
    <param name="odom_frame" value="odom"/>
  </node>

  <!-- Görselleştirme için RViz'i, BİZİM KAYDETTİĞİMİZ AYARLARLA başlat -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find robot_supurge_ros)/rviz/slam_config.rviz"/>

  <node name="turtlebot3_teleop_key" pkg="turtlebot3_teleop" type="turtlebot3_teleop_key" output="screen" launch-prefix="xterm -e"/>

</launch>
